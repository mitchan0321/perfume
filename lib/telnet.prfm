defun telnet (host enc: enc port: port) {

    if [set? enc] else: {enc := Shift-JIS};
    if [set? port] else: {port := 23};
    
    f ::= connect [resolv-host $host] $port;
    server ::= new File;
    $server set! $f mode: io;
    $server set-encoding $enc;
    $server set-newline <nil>;
    $server set-ignore-cr <t>;
    
    while {s ::= $server gets} do: {
        if {$s = ""} {continue};
        $stdout puts $s;
    };
    
    $server close;
};

